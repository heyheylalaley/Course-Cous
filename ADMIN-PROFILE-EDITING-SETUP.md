# Настройка редактирования профилей админами

Этот документ описывает, как применить изменения для добавления функционала редактирования профилей пользователей админами с полями LDC Ref и IRIS ID.

## Шаги для применения

### 1. Применить SQL миграцию для новых полей

1. Откройте Supabase SQL Editor
2. Скопируйте содержимое файла `supabase-migration-add-admin-fields.sql`
3. Вставьте в SQL Editor и выполните (Run)

Это добавит поля `ldc_ref` и `iris_id` в таблицу `profiles`.

### 2. Обновить SQL функции (если используются)

Если вы используете оптимизированные SQL функции из `database-optimization-functions.sql`:

1. Откройте Supabase SQL Editor
2. Скопируйте обновленные функции из файла `database-optimization-functions.sql`:
   - `get_all_users_with_details()` 
   - `get_course_student_details()`
3. Вставьте и выполните (Run)

Эти функции теперь включают поля `ldc_ref` и `iris_id` в свои результаты.

## Что было добавлено

### Новые поля в базе данных
- `ldc_ref` (TEXT) - LDC Reference (только для админов)
- `iris_id` (TEXT) - IRIS ID (только для админов)

### Новые функции
- `updateUserProfileByAdmin()` - позволяет админам редактировать профили любых пользователей, включая поля LDC Ref и IRIS ID

### Новые компоненты
- `AdminUserProfileModal` - модальное окно для редактирования профилей пользователей админами

### Обновленные компоненты
- `AdminAllUsers` - добавлены колонки для LDC Ref и IRIS ID, кнопка редактирования профиля

## Использование

1. Войдите как администратор
2. Перейдите в раздел "All Users" в админ-панели
3. Нажмите на кнопку редактирования (иконка карандаша) рядом с пользователем
4. В модальном окне вы можете редактировать все поля профиля, включая:
   - Основные поля (имя, фамилия, телефон, адрес, eircode, дата рождения)
   - Уровень английского языка
   - **LDC Ref** (только для админов)
   - **IRIS ID** (только для админов)

## Важно

- Поля LDC Ref и IRIS ID видны и редактируемы **только для админов**
- Обычные пользователи не видят эти поля в своем профиле
- Эти поля отображаются в таблице "All Users" в админ-панели
- Поля включены в экспорт CSV/Excel
