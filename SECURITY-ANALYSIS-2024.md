# –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞ (Cloudflare Pages + Supabase)

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2024  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Cloudflare Pages (Frontend) + Supabase (Backend/Database)

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ö–æ—Ä–æ—à–æ –∑–∞—â–∏—â–µ–Ω–æ

### 1. SQL Injection
- ‚úÖ **–ó–∞—â–∏—â–µ–Ω–æ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Supabase Client, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `.from()`, `.select()`, `.insert()`, `.update()` –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –¥–æ—Å—Ç—É–ø –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î

### 2. Row Level Security (RLS)
- ‚úÖ RLS –≤–∫–ª—é—á–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü (`profiles`, `registrations`, `courses`, `chat_messages`, –∏ –¥—Ä.)
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
  - –ê–¥–º–∏–Ω—ã –∏–º–µ—é—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `is_admin_user()`
  - –§—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `SET search_path = public` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `fix-security-warnings.sql`)

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Zod –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (`utils/validation.ts`)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö:
  - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`ProfileInfoModal.tsx`)
  - –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ (`ChatInterface.tsx`)
  - Email –∏ –ø–∞—Ä–æ–ª–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### 4. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Supabase Auth —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–µ—Å—Å–∏–π
- ‚úÖ –ü–∞—Ä–æ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ (Supabase —Ö–µ—à–∏—Ä—É–µ—Ç)
- ‚úÖ –¢–æ–∫–µ–Ω—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ

### 5. XSS –≤ React
- ‚úÖ React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ
- ‚úÖ –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `dangerouslySetInnerHTML` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- ‚úÖ Markdown —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è)

### 1. üî¥ –ö–†–ò–¢–ò–ß–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Content Security Policy (CSP)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í `index.html` –Ω–µ—Ç CSP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç XSS —á–µ—Ä–µ–∑ inline —Å–∫—Ä–∏–ø—Ç—ã
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤ —Å –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤

**–†–∏—Å–∫:**
- XSS –∞—Ç–∞–∫–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ inline —Å–∫—Ä–∏–ø—Ç—ã
- –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- Clickjacking –∞—Ç–∞–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å –≤ `index.html` –≤ —Å–µ–∫—Ü–∏—é `<head>`:
```html
<meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.supabase.co https://*.googleapis.com;
  style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
  font-src 'self' https://fonts.gstatic.com;
  img-src 'self' data: https:;
  connect-src 'self' https://*.supabase.co https://generativelanguage.googleapis.com https://*.googleapis.com;
  frame-ancestors 'none';
  base-uri 'self';
  form-action 'self';
">
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CSP —á–µ—Ä–µ–∑ Cloudflare Pages (Functions –∏–ª–∏ Headers)

---

### 2. üü° –°–†–ï–î–ù–ï: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API (Gemini, Google Translate)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è

**–†–∏—Å–∫:**
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ API (—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏)
- DDoS –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ API
- –ó–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –ï—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ rate limit –æ—Ç API (—Å—Ç—Ä–æ–∫–∞ 426 –≤ `geminiService.ts`)
- ‚úÖ –ï—Å—Ç—å debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ (300ms)
- ‚ùå –ù–µ—Ç –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ rate limiting –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π rate limiter (–∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ `SECURITY-FIXES-IMPLEMENTATION.md`)
2. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å:
   - –ß–∞—Ç: 10 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É
   - –ü–µ—Ä–µ–≤–æ–¥—ã: 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
   - –û–±—â–∏–µ API: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ Cloudflare Workers –∏–ª–∏ Supabase Edge Functions

---

### 3. üü° –°–†–ï–î–ù–ï: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç CSRF

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç —è–≤–Ω–æ–π –∑–∞—â–∏—Ç—ã –æ—Ç CSRF –∞—Ç–∞–∫
- –•–æ—Ç—è Supabase –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ, —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É

**–†–∏—Å–∫:**
- –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –ø–æ–¥–¥–µ–ª–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ Supabase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚ùå –ù–µ—Ç —è–≤–Ω—ã—Ö CSRF —Ç–æ–∫–µ–Ω–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- Supabase —É–∂–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç CSRF —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
  - SameSite cookies (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ Origin –∑–∞–≥–æ–ª–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Supabase –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π, —Ç–∞–∫ –∫–∞–∫ Supabase —É–∂–µ –∑–∞—â–∏—â–∞–µ—Ç

---

### 4. üü° –°–†–ï–î–ù–ï: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ `index.html`
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç clickjacking
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç MIME type sniffing

**–†–∏—Å–∫:**
- Clickjacking –∞—Ç–∞–∫–∏
- MIME type confusion –∞—Ç–∞–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å –≤ `index.html`:
```html
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ Cloudflare Pages Headers

---

### 5. üü° –°–†–ï–î–ù–ï: –ù–µ–ø–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –µ—Å—Ç—å, –Ω–æ –Ω–µ –≤–µ–∑–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ú–µ—Å—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ `ProfileInfoModal.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Zod –≤–∞–ª–∏–¥–∞—Ü–∏—é
- ‚úÖ `ChatInterface.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `chatMessageSchema`
- ‚ö†Ô∏è –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ–æ—Ä–º—ã –º–æ–≥—É—Ç –Ω–µ –∏–º–µ—Ç—å –ø–æ–ª–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–æ–≤ –º–æ–≥—É—Ç –Ω–µ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

**–†–∏—Å–∫:**
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤–æ –≤—Å–µ —Ñ–æ—Ä–º—ã –∞–¥–º–∏–Ω–∫–∏
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

---

### 6. üü¢ –ù–ò–ó–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—Ö–æ–¥–∞
- –ù–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–µ–æ–±—ã—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–†–∏—Å–∫:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –∞—Ç–∞–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase Logs –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Cloudflare Workers (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –≤ Supabase Dashboard

---

### 7. üü¢ –ù–ò–ó–ö–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ email
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ email

**–†–∏—Å–∫:**
- –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö email –∞–¥—Ä–µ—Å–æ–≤

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Supabase –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö/–Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö email
- –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Supabase –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ (—á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–µ email templates)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å rate limiting –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è

---

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):

1. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏** –≤ `index.html`
   - –í—Ä–µ–º—è: 30 –º–∏–Ω—É—Ç
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):

2. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** (X-Frame-Options, X-Content-Type-Options, –∏ –¥—Ä.)
   - –í—Ä–µ–º—è: 15 –º–∏–Ω—É—Ç
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è

3. ‚ö†Ô∏è **–î–æ–±–∞–≤–∏—Ç—å rate limiting –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**
   - –í—Ä–µ–º—è: 2-3 —á–∞—Å–∞
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è
   - –§–∞–π–ª: `utils/rateLimiter.ts` (—Å–æ–∑–¥–∞—Ç—å)

4. ‚ö†Ô∏è **–£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ö**
   - –í—Ä–µ–º—è: 1-2 —á–∞—Å–∞
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

5. ‚ö†Ô∏è **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
   - –í—Ä–µ–º—è: 1-2 —á–∞—Å–∞
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è

6. ‚ö†Ô∏è **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   - –í—Ä–µ–º—è: 30 –º–∏–Ω—É—Ç
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è

---

## üîí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. Cloudflare Pages Security Headers

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ `_headers` —Ñ–∞–π–ª –∏–ª–∏ Cloudflare Dashboard:
```
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: geolocation=(), microphone=(), camera=()
  Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.supabase.co; style-src 'self' 'unsafe-inline'; connect-src 'self' https://*.supabase.co https://generativelanguage.googleapis.com; frame-ancestors 'none';
```

### 2. Supabase Security Settings

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Supabase Dashboard:
- ‚úÖ **Leaked Password Protection** - –≤–∫–ª—é—á–∏—Ç—å (—Å–º. `SECURITY-FIXES-INSTRUCTIONS.md`)
- ‚úÖ **Email Rate Limits** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- ‚úÖ **Session Timeout** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π logout
- ‚úÖ **Password Requirements** - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏—é

### 3. –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç

- –ü—Ä–æ–≤–µ—Ä—è—Ç—å Security Advisor –≤ Supabase Dashboard –µ–∂–µ–º–µ—Å—è—á–Ω–æ
- –û–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ (`npm audit`)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| **SQL Injection** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –ó–∞—â–∏—â–µ–Ω–æ Supabase |
| **XSS** | ‚ö†Ô∏è –•–æ—Ä–æ—à–æ | –ù—É–∂–µ–Ω CSP |
| **CSRF** | ‚úÖ –•–æ—Ä–æ—à–æ | –ó–∞—â–∏—â–µ–Ω–æ Supabase |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è |
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (RLS)** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è** | ‚úÖ –•–æ—Ä–æ—à–æ | –ï—Å—Ç—å, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å |
| **Rate Limiting** | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | –ù–µ—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ |
| **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** üü° **–•–æ—Ä–æ—à–æ** (7/10)

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º: üü¢ **–û—Ç–ª–∏—á–Ω–æ** (9/10)

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `index.html`
- [ ] –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã (X-Frame-Options, –∏ –¥—Ä.)
- [ ] Rate limiting –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ –≤—Å–µ—Ö –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ö
- [ ] Leaked Password Protection –≤–∫–ª—é—á–µ–Ω –≤ Supabase
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –†–µ–≥—É–ª—è—Ä–Ω—ã–π `npm audit` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- [ ] Security Advisor –≤ Supabase –ø—Ä–æ–≤–µ—Ä–µ–Ω

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–ª, —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ API –∫–ª—é—á–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π, –ø–æ—ç—Ç–æ–º—É —ç—Ç–æ—Ç –∞—Å–ø–µ–∫—Ç –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –≤ –∞–Ω–∞–ª–∏–∑–µ.
